<div class="container">
  <div ng-show="pageloader"><img src="/images/icons/loader.gif"></div>
  <h1>Create an Event</h1>
  <!-- Step Form -->
  
  <div class="stage-container clearfix">
    <div class="stage" ng-repeat="step in steps" ng-class="{current: isActive2(step)}" ng-click="click_menu(step,data1)">
      <div class="stage-icon"><i class="{{step.icon}}"></i> </div>
      <div class="stage-title">{{step.title}}</div>
    </div>
 </div>

    
    <span ng-hide="error_message"><p class="error-fld" >{{error}}</p></span>
    
    <div class="form-section  wt-frame">
        <div>
           <!-- Event Detail Form -->

            <div ng-hide="error_message"><p class="success-fld ng-binding">{{success}}</p></div>
            
    <form  name="myForm1" novalidate ng-submit="price_and_link_data(data1)">

   <section class="row">
              <section class="col-sm-2">
                  <div class="form-group" ng-class="{ 'has-error' : myForm1.eventinventory.$dirty && myForm1.eventinventory.$invalid }"  >
                    <label class="form-label">Event Inventory<span class="req">*</span></label>

                    <input  type="number" min="0" name="eventinventory" ng-model="data1.eventinventory" maxlength="4" class="event_number_wd form-control" placeholder="" ng-blur="eventInventoryCalc()" required  style="width:87px;">


                    <p class="help-inline error-fld ng-binding"  ng-show="myForm1.eventinventory.$dirty && myForm1.eventinventory.$invalid">Enter valid event inventory.</p>

                  </div>
<!--
<p>
  <input type="submit"
  ng-disabled="myForm1.$dirty && myForm1.$invalid ">
</p>-->
              </section>
              <section class="col-sm-4">
                  <div class="form-group">
                    <label class="form-label">Type of Event</label>
                    <section class="radio-sec with-ftext">
                          <section class="radio-inline">
                              <input type="radio"  id="radio111"  name="type_of_event" ng-model="data1.type_of_event"  value="0" ng-checked="data1.type_of_event==0">
                              <label for="radio111"><span></span>Ticketed</label>
                          </section>
                            <section class="radio-inline">
                          <input  type="radio" id="radio2222"   name="type_of_event" ng-model="data1.type_of_event" value="1" ng-checked="data1.type_of_event==1">
                          <label for="radio2222"><span></span>Registration</label>
                          </section>
                   </section>
                  </div>
              </section>
          </section>
   <!--Ticket Types Start -->
          <div class="module">
              <section class="prof-hd" ng-click="toggle_block(1,str_1)">
                   <i class="fa fa-ticket hdicon pos-l16"></i>
                    <h2>Ticket Types <span class="rt-img"><i class="fa {{enable_1}}"></i></span></h2>
            </section>
                <section class="gray-frame sub-fields" ng-show="block_1">
                  <section class="grid-btn-top row">
                      <section class="col-sm-7">
                        <section class="radio-sec">
                          <section class="radio-inline">
                              <input type="radio" id="radio011"  name="price" ng-model="data1.price"   value="0" ng-checked="data1.price==0">
                              <label for="radio011"><span></span>Arrange by price</label>
                          </section>
                            <section class="radio-inline">
                          <input id="radio022" type="radio"  name="price" ng-model="data1.price"  value="1" ng-checked="data1.price==1">
                          <label for="radio022"><span></span>Manually Arrange</label>
                          </section>
                         </section>
                      </section>
                      <section class="col-sm-5 right-btns text-right">
                        
                         <button class="pink-btn btn btn-small m-fw" type="button" ng-click="open_price_level('lg')">ADD PRICE LEVEL</button>
                      </section>
                    </section>

<!--************************************* remaining section by***DEEPAK K ****************************-->
                      <section class="grid-btn-top row">
                      <section class="col-sm-7">
                      </section>
                      <section class="col-sm-3 right-btns text-right">
                      <label>Remaining Inventory : {{totalRemainings}}</label>
                      </section>
                      <section class="col-sm-3 right-btns text-right" ng-if="totalRemainingsError">
                      <label style="color: #ff0000 !important;">Invalid Event Inventory</label>
                      </section>
                      </section>
<!-- ************************************************************************************************* -->


                      <section class="grid-widget">
                      <span ng-show="success_message1" ><p class="success-fld ng-binding">{{success1}}</p></span> 
                      <span><p>{{activation_message}}</p></span> 
         
     <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th width="15%">Name</th>
            <th width="10%" class="numbers">Sold/Remaining</th>
            <th width="13%" class="numbers">Price</th>
            <th width="14%" class="numbers">Box office <span class="l-b">Price</span></th>
            <th width="12%" class="numbers">Limit</th>
            <th width="23%">&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="price in price_level track by $index">
            <td><strong>{{price.price_level_name}}</strong></td>
            <td class="numbers">0/{{price.quantity_available}}</td>
            <td class="numbers">${{price.online_price}}</td>
            <td class="numbers">${{price.box_office_price}}</td>
            <td class="numbers">{{price.max_per_order}}</td>
            <td class="action">
              <a ng-click="getPrice(price.id)" style="cursor: pointer;"><i class="fa fa-edit"></i></a>
              <a ng-click="price_change('lg',price.id,price.showclix_price_id)" style="cursor: pointer;"><i class="fa fa-tags"></i></a>
              <a ng-click="changeStatus(price.id,price.is_active,price.showclix_price_id)" ng-confirm-click="Would you like to change Price level status ?" style="cursor: pointer;"><i class="fa fa-check-circle" ng-if="price.is_active == 1"></i><i class="fa fa-times" ng-if="price.is_active == 0"></i></a>
              <a ng-click="delete_price_level('',$index,price.id,price.showclix_price_id)" style="cursor: pointer;"><i class="fa fa-trash"></i></a>
            </td>
          </tr>
          <tr ng-show="loader">
            <td colspan="7" align="center"><img src="/images/icons/loader.gif"></td>
          </tr>
        </tbody>
       </table>
      </div>
      </section>
                  
      <section class="grid-bottm clearfix">
        <section class="gr-right pull-right">
          <ul class="legends">
              <li><i class="fa fa-pencil-square-o"></i> <span>Edit</span></li>
                <li><i class="fa fa-tags"></i><span>change price</span></li>
                <li><i class="fa fa-check-circle"></i><span>active</span></li>
                <li><i class="fa fa-trash"></i><span>delete</span></li>
            </ul>
        </section>
      </section>
                
      <div class="row">
        <div class="col-sm-12">
            <div class="form-group row">                            
              <section class="col-sm-3" ng-hide="age_div">
                  <label> Ages<span class="req">*</span></label>
                  <select class="form-control" name="custom_ages" ng-model="data1.custom_ages">
                    <option ng-repeat="age in ages" value="{{age.age}}">{{age.name}}</option>
                  </select>
              </section>
              <section class="col-sm-3" ng-hide="dynamic_age_div">
                <label>Ages<span class="req">*</span></label>
                <input type="text" class="form-control"  name="dynamic_age" ng-model="data1.dynamic_age">
              </section>
              <section class="col-sm-3 f-12">
                <label>&nbsp;</label>
                  <span ng-hide="age_text_div"><a ng-click="custom_age()" style="cursor: pointer;" class="u-text with-ftext"><strong>Define a custom age limit</strong></a></span>
                  <span ng-hide="return_age_text_div"><a ng-click="custom_default_age()" style="cursor: pointer;" class="u-text with-ftext"><strong>Return to Default age limits</strong></a></span>
              </section>
            </div>
          </div>
      </div>

        </section>
      </div>
          <!-- Ticket Types Closed -->
          <!-- Bundles Start -->
          <section class="module">
              <section class="prof-hd" ng-click="toggle_block(2,str_2)">
                   <i class="fa fa-database hdicon pos-l16"></i>
                    <h2>Bundles <span class="rt-img"><i class="fa {{enable_2}}"></i></span></h2>
                 </section>
                <section class="gray-frame sub-fields" ng-show="block_2">
                  <section class="grid-btn-top row">
                      
                      <section class="col-sm-5 pull-right text-right">
                        <button class="pink-btn btn btn-small m-fw" type="button" ng-click="add_bundle('lg')">ADD a Bundle</button>
                      </section>
                    </section>
                  <section class="grid-widget">
                  <span ng-show="success_message_bundle" class="ng-hide"><p class="success-fld ng-binding">{{success_bundle}}</p></span>
                  <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th width="15%">Name</th>
                                <th width="10%" class="numbers">Price</th>
                                <th width="14%" class="numbers">Box Office Price</th>
                                <th width="13%" class="numbers">Per-Sale Limit</th>
                                <th width="14%" class="numbers">Max Inventory Set</th>
                                <th width="23%">&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="bundle in bundleList track by $index">
                                <td><strong>{{bundle.bundle_name}}</strong></td>
                                <td class="numbers">${{bundle.total_online}}</td>
                                <td class="numbers">${{bundle.total_boxoffice}}</td>
                                <td class="numbers">${{bundle.bundle_limit}}</td>
                                <td class="numbers">${{bundle.bundle_inventory}}</td>
                                <td class="action">
                                  <a ng-click="add_bundle('lg',bundle.id)" style="cursor: pointer;"><i class="fa fa-edit"></i></a>
                                  <a ng-click="changeBundleStatus(bundle.id,bundle.status)" ng-confirm-click="Would you like to change bundle status ?">
                                    <i class="fa fa-check-circle" ng-if="bundle.status == 'true'"></i>
                                    <i class="fa fa-times" ng-if="bundle.status == 'false'"></i>
                                  </a>
                                  <a ng-click="delete_bundle('',$index,bundle.id)" style="cursor: pointer;"><i class="fa fa-trash"></i></a>
                                </td>
                            </tr>
                            <tr ng-show="loader_bundle">
                                  <td colspan="7" align="center"><img src="/images/icons/loader.gif"></td>
                            </tr>
                        </tbody>
                    </table>
                  </div>
                  </section>
                  
                  <section class="grid-bottm clearfix">
                    <section class="gr-right pull-right">
                      <ul class="legends">
                        <li><i class="fa fa-pencil-square-o"></i> <span>Edit</span></li>
                        <li><i class="fa fa-check-circle"></i><span>active</span></li>
                        <li><i class="fa fa-trash"></i><span>delete</span></li>
                      </ul>
                    </section>
                  </section>
            </section>
          </section>
          <!-- Bundles Closed --> 
          <!--Product Start -->
          <div class="module">
              <section class="prof-hd" ng-click="toggle_block(3,str_3)">
                   <i class="fa fa-shopping-cart hdicon pos-l16"></i>
                    <h2>Product <span class="rt-img"><i class="fa {{enable_3}}"></i></span></h2>
              </section>
              <section class="gray-frame sub-fields" ng-show="block_3">
                <section class="grid-btn-top row">                      
                  <section class="col-sm-5 right-btns text-right">
                    <button class="pink-btn btn btn-small m-fw" type="button" ng-click="add_product('lg')">Add Product</button>
                  </section>
                </section>
                <section class="grid-widget">
                  <span ng-show="success_message_product" class="ng-hide"><p class="success-fld ng-binding">{{success_product}}</p></span>
                    <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th width="25%">Name</th>
                                <th width="25%" class="numbers">Price</th>
                                <th width="30%" class="numbers">Positioning</th>
                                <th width="20%">&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="eventProduct in eventProductList track by $index">
                            <td><strong>{{eventProduct.product_name}}</strong></td>
                            <td class="numbers">${{eventProduct.price}}</td>
                            <td class="numbers">
                              <span class="l-b" ng-if="eventProduct.placement_listing == 1 && eventProduct.placement_confirmation == 0">Listing Page</span>
                              <span class="l-b" ng-if="eventProduct.placement_listing == 0 && eventProduct.placement_confirmation == 1">Confirmation Page</span>
                              <span class="l-b" ng-if="eventProduct.placement_listing == 1 && eventProduct.placement_confirmation == 1">Listing Page, Confirmation Page</span>
                            </td>
                            <td class="action">
                              <a ng-click="add_product('lg',eventProduct.id)" style="cursor: pointer;"><i class="fa fa-edit"></i></a>
                              <a ng-click="delete_event_product('',$index,eventProduct.id)" style="cursor: pointer;"><i class="fa fa-trash"></i>
                              </a>
                            </td>
                          </tr>
                          <tr ng-show="loader_bundle">
                            <td colspan="7" align="center"><img src="/images/icons/loader.gif"></td>
                          </tr>
                        </tbody>
                    </table>
                  </div>
                </section>
                
                <section class="grid-bottm clearfix">
                  <section class="gr-right pull-right">
                    <ul class="legends">
                      <li><i class="fa fa-pencil-square-o"></i> <span>Edit</span></li>
                      <li><i class="fa fa-trash"></i><span>delete</span></li>
                    </ul>
                  </section>
                </section>
          </section>
          </div>
          <!-- Product Closed -->
          <!--Links Start -->
          <div class="module">
  <section class="prof-hd" ng-click="toggle_block(4,str_4)">
    <i class="fa fa-link hdicon pos-l16"></i>
    <h2>Links <span class="rt-img"><i class="fa {{enable_4}}"></i></span></h2>
  </section>
  <section class="gray-frame" ng-show="block_4">
    <div class="row">
      <div class="col-sm-6">
        <div class="form-group">
          <label for="EventName"> Video</label>
          <input type="url" name="video" ng-model="data1.video" class="form-control"/>
          <span style="color:red" ng-show="myForm1.video.$dirty && myForm1.video.$invalid">
  <span ng-show="myForm1.video.$error.required">Video embed url is required</span>
  </span>
    <span style="color:red" ng-show="myForm1.video.$dirty && myForm1.video.$invalid">
  <span ng-show="myForm1.video.$error.url">Not a valid video embed URL</span>
  </span>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <label for="EventName"> Facebook</label>
         <input type="url" name="facebook" ng-model="data1.facebook"  class="form-control" ng-pattern="/^(https?:\/\/)?(www\.)?facebook.com/" />
          <span style="color:red" ng-show="myForm1.facebook.$dirty && myForm1.facebook.$invalid">
  <span ng-show="myForm1.facebook.$error.pattern">Not a valid Facebook URL</span>
  </span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <div class="form-group">
          <label for="EventName"> Twitter</label>
         <input type="url" name="twitter" ng-model="data1.twitter"   class="form-control" ng-pattern="/^(https?:\/\/)?(www\.)?twitter.com/"/>
           <span style="color:red" ng-show="myForm1.twitter.$dirty && myForm1.twitter.$invalid">
  <span ng-show="myForm1.twitter.$error.pattern">Not a valid Twitter URL</span>
  </span>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <label for="EventName"> Event Website</label>
          <input type="url" class="form-control"  name="eventwebsite" ng-model="data1.eventwebsite"  />
          <span style="color:red" ng-show="myForm1.eventwebsite.$dirty && myForm1.eventwebsite.$invalid">
  <span ng-show="myForm1.eventwebsite.$error.url">Not a valid website URL</span>
  </span>
        </div>
      </div>
    </div>
  </section>
</div>
          <!--Links Closed -->
          <!-- Search options Start -->
           <div class="form-group clearfix">
            <section class="prof-hd" ng-click="toggle_block(5,str_5)">
                   <i class="fa fa-search hdicon pos-l16"></i>
                    <h2>Search options <span class="rt-img"><i class="fa {{enable_5}}"></i></span></h2>
            </section>
                <section class="gray-frame" ng-show="block_5">
                  <div class="row">
                      <div class="col-sm-6">
                          <div class="form-group">
                            <label for="EventName"> Additional Keywords/Tags</label>
                            <input type="text" name="keyword"  ng-model="data1.keyword" class="form-control" placeholder="Additional Keywords/Tags"/>
                            <span style="color:red" ng-show="myForm1.keyword.$dirty && myForm1.keyword.$invalid">
  <span ng-show="myForm1.keyword.$error.required">Additional Keywords/Tags is required</span>
  </span>
                          </div>
                        </div>
                    </div>
                    <div class="row">
                    <div class="col-sm-4">
                          <div class="form-group">
                            <label for="EventName"> Categories<span class="req">*</span></label>
                            
                            <select class="form-control" name="category1" ng-model="data1.category1">
                            <option ng-repeat="cat in cat1" value="{{cat.category_id}}" >{{cat.name}}</option>
                            </select>
                          </div>
                    </div>
                    <div class="col-sm-4 text-drop">
                          <div class="form-group">
                            <select class="form-control" ng-model="data1.category2">
                             <option ng-repeat="cat in cat1" value="{{cat.category_id}}">{{cat.name}}</option>  
                            </select>
                          </div>
                        </div>
                        <div class="col-sm-4 text-drop">
                          <div class="form-group">
                            <select class="form-control" ng-model="data1.category3">
                             <option ng-repeat="cat in cat1" value="{{cat.category_id}}">{{cat.name}}</option> 
                            </select>
                          </div>
                        </div></div>
                    
            </section>
          </div>
           <!-- Search options Closed -->
           <div class="editor-btn">
          <button type="button" ng-click="click_menu(steps[0])" class="gray-btn btn">Back</button>
          <!-- <button type="submit" class="pink-btn btn">Save</button> -->
          <button type="button" ng-click="click_menu(steps[2],data1)" class="pink-btn btn">Save &amp; Continue </button>
        </div>
          
</form>
       </div>
    </div>
 </div>
<script type="text/ng-template" id="deletePricelevel.html">
     <div class="modal-header">
            <h3 class="modal-title">Remove Price level</h3>
        </div>
        <div class="modal-body">
            Are you sure you want to remove this price level?
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="remove()">Remove</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
  </script>
  <script type="text/ng-template" id="myModalContentPrice.html">
        <div  class="modal-header">
            <h3 class="modal-title" style="float:left;">Manage Price Level</h3><a style="float:right;cursor: pointer;" ng-click="cancel()">X</a>
        </div>
        <form  name="pricelevelForm" class="pricelevelForm"  ng-submit="savepriceleveldata(data1)" novalidate>
        <div  class="modal-body">
        <!-- {{data1}}-->
            <fieldset  class="form-group" style="padding-top:10px">
               <div class="col-sm-4">Price Level Name<span class="req">*</span></div>
               <div class="col-sm-8"><input type="text" ng-model="data1.price_level" name="price_level" class="form-control" required><input type="hidden" ng-model="data1.id">

               <p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.price_level.$invalid && !pricelevelForm.price_level.$pristine">Price Level Name is required</p>

               </div>
               
            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Price Level Type</div>
               <div class="col-sm-8"><select ng-model="data1.price_type" name="price_type" class="form-control"
               ng-change="change_price_type()">
                    <option value="">---</option>
                    <option value="fixed_price">Fixed Price</option>
                    <option value="name_your_price">Name your Price</option>
               </select></div>
            </fieldset>
            <fieldset class="form-group" ng-hide="online_price">
               <div class="col-sm-4">Online Price(USD $)</div>
               <div class="col-sm-8"><input  type="number" min="0" ng-model="data1.online_price" name="online_price" class="event_number_wd form-control" ng-blur="onlinePricefunc()" >
               <p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.online_price.$invalid && !pricelevelForm.online_price.$pristine">Please enter valid online price</p>
               </div>

               

            </fieldset>
            
            <fieldset class="form-group" ng-hide="min_price">
               <div class="col-sm-4">Minimum Price(USD $)</div>
               <div class="col-sm-8"><input  type="number" min="0" ng-model="data1.minimum_price" name="minimum_price" class="event_number_wd form-control">
               <p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.minimum_price.$invalid && !pricelevelForm.minimum_price.$pristine">Please enter valid minimum price</p>
               </div>

               

            </fieldset>
            <fieldset class="form-group" ng-hide="min_price">
               <div class="col-sm-4">Suggested Price(USD $)</div>
               <div class="col-sm-8"><input  type="number" min="0" ng-model="data1.suggested_price" name="suggested_price" class="event_number_wd form-control" ng-blur="suggestedPricefunc()" ><p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.suggested_price.$invalid && !pricelevelForm.suggested_price.$pristine">Please enter valid suggested price</p>
               </div>

               


            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Box Office Price(USD $)</div>
               <div class="col-sm-8"><input  type="number" min="0" ng-model="data1.box_office_price" name="box_office_price" class="event_number_wd form-control"><p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.box_office_price.$invalid && !pricelevelForm.box_office_price.$pristine">Please enter valid box office price</p>
               </div>





            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Quantity Available</div>
               <div class="col-sm-8"><input  type="number" min="0" max={{eventInventory}} ng-model="data1.quantity_available" name="quantity_available" ng-change="QuanAvailClear()" class="event_number_wd form-control" >
               <p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.quantity_available.$invalid && !pricelevelForm.quantity_available.$pristine">Please enter valid available quantity or less than inventory remaining</p>
               </div>
            </fieldset>

               


            </fieldset>

            <fieldset class="form-group">
               <div class="col-sm-4">Hide Online</div>
               <div class="col-sm-8">
            <section class="radio-sec">
                          <section class="radio-inline">
                              <input id="radio01" type="radio"  name="hide_online" ng-model="data1.hide_online"  value="1">
                              <label for="radio01"><span></span>Yes</label>
                          </section>
                            <section class="radio-inline">
                          <input id="radio02" type="radio"  name="hide_online" ng-model="data1.hide_online"  value="0">
                          <label for="radio02"><span></span>No</label>
                          </section>
                         </section>
               </div>
            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Hide in Box Office</div>
               <div class="col-sm-8">
                   
            <section class="radio-sec">
                          <section class="radio-inline">
                              <input type="radio" id="radio03" name="hide_in_box_office" ng-model="data1.hide_in_box_office" value="1" >
                              <label for="radio03"><span></span>Yes</label>
                          </section>
                            <section class="radio-inline">
                          <input type="radio" id="radio04"  name="hide_in_box_office" ng-model="data1.hide_in_box_office"  value="0" >
                          <label for="radio04"><span></span>No</label>
                          </section>
                         </section>
               </div>
            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Minimum Per Order</div>
               <div class="col-sm-8"><input  type="number" min="0" max={{data1.quantity_available}} ng-model="data1.minimum_per_order" name="minimum_per_order" class="event_number_wd form-control" ><p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.minimum_per_order.$invalid && !pricelevelForm.minimum_per_order.$pristine">
               Minimum no. of tickets should be greater than 0 and less than available quantity</p>
               </div>
               
               


            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Maximum Per Order</div>
               <div class="col-sm-8"><input  type="number" min="0" max={{data1.quantity_available}} ng-model="data1.maximum_per_order" name="maximum_per_order" class="event_number_wd form-control" >
               <p class="help-inline error-fld ng-binding"  ng-show="pricelevelForm.maximum_per_order.$invalid && !pricelevelForm.maximum_per_order.$pristine">
               Minimum no. of tickets should be greater than 0 and less than available quantity</p>
               </div>

               


            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-4">Description</div>
               <div class="col-sm-8"><textarea ng-model="data1.description" name="description" class="form-control"/></div>
            </fieldset>
           
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary"  
ng-disabled="pricelevelForm.$invalid"  type="submit">Submit</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
        </form>
    </script>
  <script type="text/ng-template" id="pricechange.html">
      <form class="pricechangeform" name="pricechangeform" ng-submit="pricechangefunc(data2)" novalidate>
        <div class="modal-header">
           <h3 class="modal-title" style="float:left;">Schedule Price Change</h3><a style="float:right;cursor: pointer;" ng-click="cancel()">X</a>
        </div>
        <div class="modal-body">
            <fieldset class="form-group">
               <div class="col-sm-3">Price to change on</div>
               <div class="col-sm-3">
                   <!-- <input type="text" name="date" ng-model="data2.date" class="form-control"  value="">-->
                   <div class="form-group datepicker">
                         <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="data2.startdate_pricechange" is-open="popup1.opened" datepicker-options="dateOptions"  close-text="Close" alt-input-formats="altInputFormats" />
                         <span class="input-group-btn">
                           <i class="glyphicon glyphicon-calendar" ng-click="open1()"></i></span>
                     </div>
               </div>
               <div class="col-sm-2">
                    <select name="month" ng-model="data2.month" class="form-control">
                         <option ng-repeat="mon in months" value="{{mon.id}}">{{mon.name}}</option>
                    </select>
               </div>
               <div class="col-sm-2">
                    <select name="time" ng-model="data2.time" class="form-control">
                         <option ng-repeat="time in timeinterval" value="{{time.id}}">{{time.name}}</option>
                    </select>
               </div>
               <div class="col-sm-2">
                    <select name="interval" ng-model="data2.interval" class="form-control">
                         <option ng-repeat="int in interval" value="{{int.id}}">{{int.name}}</option>
                    </select>
               </div>
            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-3">New Price (USD $)</div>
               <div class="col-sm-9">
                    <input  type="number" min="0" name="new_price" ng-model="data2.new_price" class="form-control" value="" required>
                    <p class="help-inline error-fld ng-binding"  ng-show="pricechangeform.new_price.$invalid && !pricechangeform.new_price.$pristine">Please enter valid price</p>
                    
                    <!--<span style="color:red" ng-show="pricechangeform.new_price.$dirty && pricechangeform.new_price.$invalid">
                <span ng-show="pricechangeform.new_price.$error.required">New Price is required</span>
               </span>-->
               </div>
              
            </fieldset>
            <fieldset class="form-group">
               <div class="col-sm-3">Apply to</div>
               <div class="col-sm-3">
                    <select name="price" ng-model="data2.apply"  class="form-control" >
                         <option ng-repeat="applied in apply" value="{{applied.id}}">{{applied.name}}</option>
                    </select>
               </div>
               <div class="col-sm-6">&nbsp;</div>
            </fieldset>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary"  
ng-disabled="pricechangeform.$invalid"  type="submit">Submit</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
</script>



<script type="text/ng-template" id="myModalContentBundle.html"> 
    <div class="modal-header">
        <h3 class="modal-title" style="float:left;">Add a Bundle</h3><a style="float:right;cursor: pointer;" ng-click="cancel()">X</a>
    </div>
    <div class="modal-body">
       
    <!-- Step Form -->
    <div class="stage-container stage-container-3steps clearfix">
      <div class="stage" ng-repeat="step in steps" data-ng-class="{current: $index + 1 === selectedClass}" ng-click="click_menu(step,bundle)"><div class="stage-icon"><i class="{{step.icon}}"></i> </div>
        <div class="stage-title">{{step.title}}</div> </div>
    </div>
    <!-- //Step Form --> 
    <span ng-hide="error_message"><p class="error-fld" >{{error}}</p></span>

    <div class="form-section  wt-frame">
            <span ng-show="success_message" class="ng-hide"><p class="success-fld ng-binding">{{success}}</p></span>
            <!-- Step 1 start -->
               <div ng-show="step_1">
                <!-- Event Detail Form -->
                      <form  name="bundleForm" ng-submit="bundleForm.$valid && addBundle(bundle)" novalidate>
                      <input type="hidden" name="id" ng-model="bundle.id" value=""/>

                             <div>
                                <div class="module">
                                    <section class="prof-hd" > <!-- add  class="prof-hd"if u need to display this as tab -->
                                     <i class="fa fa-link hdicon pos-l16"></i>
                                      <h2> Details <span class="rt-img"></span></h2>
                                    </section>
                                    <section class="gray-frame">
                                     
                                      <div class="row">
                                        <div class="col-sm-12">
                                          <div class="form-group" ng-class="{true: 'error'}[submitted]">
                                            <label for="EventName">Name<span class="req">*</span></label>
                                            <input type="text" class="form-control" name="bundle_name" placeholder="Bundle name" ng-model="bundle.bundle_name" required/>
                                            <p class="help-inline error-fld ng-binding" ng-show="submitted && bundleForm.bundle_name.$error.required">Please enter bundle name</p>
                                          </div>
                                        </div>
<<<<<<< HEAD
=======
                                      </div>
                                      <div class="row">
>>>>>>> 844456b376bf0b33c31ce127b1e3daea1f0601d9
                                        <div class="col-sm-12">
                                          <div class="form-group">
                                            <label for="EventName"> Description</label>
                                            <div class="bundle-editr" >
                                              <div ckeditor="option_ckeditor" ng-model="bundle.bundle_description" ready="onReady()"></div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-sm-4" >
                                          <div class="form-group">
                                            <label for="EventName"> Limit<span class="req-limit">*</span></label>
<<<<<<< HEAD
                                            <input  type="number" min="0" class="form-control"  ng-model="bundle.bundle_limit" name="bundle_limit" style="width:100px;"/>
=======
                                            <input  type="number" min="0" class="event_number_wd form-control" placeholder="Limit" ng-model="bundle.bundle_limit" name="bundle_limit"/>
>>>>>>> 844456b376bf0b33c31ce127b1e3daea1f0601d9
                                            <p class="help-inline error-fld ng-binding"  ng-show="bundleForm.bundle_limit.$invalid && !bundleForm.bundle_limit.$pristine">Please enter valid limit</p>
                                            
                                          </div>
                                          
                                        </div>
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Minimum Purchase</label>
<<<<<<< HEAD
                                            <input type="number" min="0"  class="form-control"  ng-model="bundle.bundle_minimum_purchase" name="bundle_minimum_purchase" style="width:100px;"/>
=======
                                            <input type="number" min="0"  class="event_number_wd form-control" placeholder="Minimum Purchase" ng-model="bundle.bundle_minimum_purchase" name="bundle_minimum_purchase"/>
>>>>>>> 844456b376bf0b33c31ce127b1e3daea1f0601d9

                                            <p class="help-inline error-fld ng-binding"  ng-show="bundleForm.bundle_minimum_purchase.$invalid && !bundleForm.bundle_minimum_purchase.$pristine">Please enter valid minimum purchase limit</p>
                                           
                                          </div>
                                        </div>
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Multiple Ticket Holders?</label>
                                            <div class="onoffswitch">
                                              <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch2" ng-model="bundle.multiple_ticket_holder" checked>
                                              <label class="onoffswitch-label" for="myonoffswitch2"></label>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <br/>
                                      <br/>
                                      <div class="row">
                                        <div class="col-sm-12">
                                          <div class="form-group">
                                            <p for="EventName"> When an inventory is not set on this bundle it will fallback to the inventory of events and pricing levels in this bundle</p>
                                          </div>
                                        </div>
                                      </div>
                                      <br/>
                                      <br/>
                                      <div class="row">
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Assign Inventory?<span class="req">*</span></label>
                                            <div class="onoffswitch">
                                              <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch4" ng-model="bundle.assign_inventory"  ng-model="checked" checked>
                                              <label class="onoffswitch-label" for="myonoffswitch4"></label>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Inventory</label>
<<<<<<< HEAD
                                            <input type="number" min="0" class="form-control" ng-disabled="!bundle.assign_inventory"  ng-model="bundle.bundle_inventory" name="bundle_inventory"style="width:100px;"/>
=======
                                            <input type="number" min="0" class="event_number_wd form-control" ng-disabled="!bundle.assign_inventory" placeholder="Inventory" ng-model="bundle.bundle_inventory" name="bundle_inventory"/>
>>>>>>> 844456b376bf0b33c31ce127b1e3daea1f0601d9
                                            <p class="help-inline error-fld ng-binding"  ng-show="bundleForm.bundle_inventory.$invalid && !bundleForm.bundle_inventory.$pristine">Please enter valid value</p>
                                          </div>
                                        </div>
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Active</label>
                                            <div class="onoffswitch">
                                              <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch1" ng-model="bundle.status" checked>
                                              <label class="onoffswitch-label" for="myonoffswitch1"></label>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Hide Online?</label>
                                            <div class="onoffswitch">
                                              <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch3" ng-model="bundle.hide_online" checked>
                                              <label class="onoffswitch-label" for="myonoffswitch3"></label>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-sm-4">
                                          <div class="form-group">
                                            <label for="EventName"> Hide in box office?</label>
                                            <div class="onoffswitch">
                                              <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch5" ng-model="bundle.hide_in_box_office" checked>
                                              <label class="onoffswitch-label" for="myonoffswitch5"></label>
                                            </div>
                                          </div>
                                        </div>
                                      </div>


                                   </section>
                              </div>
                            </div>
                            
                            <div>
                                <div class="editor-btn">
                                    <button type="submit" class="pink-btn btn" ng-click="submitted=true">Save</button>
                                    <button type="button" class="pink-btn btn" ng-click="submitted=true && click_menu({id:2} , bundle);">Next</button>
                              </div>   
                            </div>
                    </form>
           </div>
           <!-- Step 1 end -->
          
             
          <!-- Step 2 start -->
          <div ng-show="step_2">
            <div class="module">
              <form class="" name="bundlestep2" ng-submit="bundlestep2.$valid && updateQty()" novalidate>
                

                <section ng-if="price_level.length > 0" class="prof-hd">
                  <i class="fa fa-link hdicon pos-l16"></i>
                  <h2>Event<span style="float:right;">Quantity</span></h2>
                </section>
                <section ng-if="price_level.length > 0" class="gray-frame">
                  <div class="row" ng-repeat="price in price_level" >
                    <div class="col-sm-8" >
                      <div class="form-group">
                        <label for="EventName">  {{price.price_level_name}} (Online Price: ${{price.online_price}}, Box Office Price: ${{price.box_office_price}}) </label>
                      </div>
                    </div>
                    <div class="col-sm-4" >
                      <div class="form-group">
                        <select class="form-control" ng-model="price_level[$index].qty" name="price_level{{$index}}" ng-options="n for n in range(price.min_per_order,price.max_per_order)" ng-selected='n == price_level[$index].qty'>
                        </select>
                      </div>
                    </div>
                  </div>
                </section>

                <section class="prof-hd">
                  <i class="fa fa-link hdicon pos-l16"></i>
                  <h2>Products<span style="float:right;">Quantity</span></h2>
                </section>
                <section class="gray-frame">
                  <div class="row" ng-repeat="product in productList" >
                    <div class="col-sm-8" >
                      <div class="form-group">
                        <label for="EventName"> {{product.product_name}} (Price: ${{product.retail_price}}) </label>
                      </div>
                    </div>
                    <div class="col-sm-4" >
                      <div class="form-group">
                        <select class="form-control" ng-model="productList[$index].qty" name="productList{{$index}}" ng-options="n for n in range(1,product.inventory)" ng-selected='n == productList[$index].qty'>
                        </select>
                      </div>
                    </div>
                  </div>
                </section>
                <div class="editor-btn">
                  <button type="button" class="pink-btn btn" ng-click="click_menu({id:1});">Prev</button>
                  <button type="submit" class="pink-btn btn" ng-click="submitted2=true">Save</button>
                  <button type="button" class="pink-btn btn" ng-click="submitted2=true && click_menu({id:3});">Next</button>
                </div>
              </form>
            </div>
          </div>
           <!-- Step 2 end -->
           
           <!-- Step 3 start -->
           <div ng-show="step_3">
                <div class="module">
                    <section class="prof-hd"> <i class="fa fa-link hdicon pos-l16"></i>
                      <h2>How much does the bundle cost?<span class="rt-img"></span></h2>
                    </section>
                    <section class="gray-frame">
                        <div class="row">
                          <div class="col-sm-12" >
                            <div class="form-group">
                              <label for="EventName"> Event</label>
                            </div>
                          </div>
                       </div>
                        <section class="grid-widget">
                            <div class="table-responsive">
                              <table class="table table-striped">
                                <thead>
                                  <tr>
                                      <th width="25%">Price Level</th>
                                      <th width="25%">Quantity</th>
                                      <th width="25%">Online Price</th>
                                      <th width="25%">Box Office Price</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="price in price_level">
                                    <td>{{price.price_level_name}}</td>
                                    <td>{{price.qty}}</td>
                                    <td>${{price.online_price * price.qty}}</td>
                                    <td>${{price.box_office_price * price.qty}}</td>
                                   </tr>
                                  </tbody>
                              </table>
                            </div>
                       </section>
                  </section>
                  <br/>
                  <section class="gray-frame">
                        <div class="row">
                          <div class="col-sm-12" >
                            <div class="form-group">
                              <label for="EventName"> Product</label>
                            </div>
                          </div>
                       </div>
                        <section class="grid-widget">
                            <div class="table-responsive">
                              <table class="table table-striped">
                                <thead>
                                  <tr>
                                      <th width="25%">Price Level</th>
                                      <th width="25%">Quantity</th>
                                      <th width="25%">Online Price</th>
                                      <th width="25%">Box Office Price</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="product in productList">
                                    <td>{{product.product_name}}</td>
                                    <td>{{product.qty}}</td>
                                    <td>${{product.qty*product.retail_price}}</td>
                                    <td>${{product.qty*product.retail_price}}</td>
                                   </tr>
                                  </tbody>
                              </table>
                            </div>
                       </section>
                  </section>

                  <section class="gray-frame">
                        <div class="row">
                          <div class="col-sm-12" >
                            <div class="form-group">
                              <label for="EventName"> Total</label>
                            </div>
                          </div>
                       </div>
                        <section class="grid-widget">
                            <div class="table-responsive">
                              <table class="table table-striped">
                                <thead>
                                  <tr>
                                      <th width="25%">Price Level</th>
                                      <th width="25%">Quantity</th>
                                      <th width="25%">Online Price</th>
                                      <th width="25%">Box Office Price</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td>Total</td>
                                    <td>{{totalQty}}</td>
                                    <td>{{totalOnlineShow}}</td>
                                    <td>{{totalBoxofficeShow}}</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                       </section>
                  </section>

                  <section class="gray-frame">
                        <div class="row">
                          <div class="col-sm-12" >
                            <div class="form-group">
                              <label for="EventName">Discounted Price </label>
                            </div>
                          </div>
                       </div>
                        <section class="grid-widget">
                            <div class="table-responsive">
                              <table class="table table-striped">
                                <thead>
                                  <tr>
                                      <th width="50%">Online Price (Service Fee)</th>
                                      <th width="50%">Box Office Price (Service Fee)</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td>$<input type="text" name="totalOnline" ng-model="totalOnline"/> ($23)</td>
                                    <td>$<input type="text" name="totalBoxoffice" ng-model="totalBoxoffice"/> ($36)</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                       </section>
                  </section>


                  <div class="editor-btn">
                    <button type="button" class="pink-btn btn" ng-click="click_menu({id:2});">Prev</button>
                    <button type="button" class="pink-btn btn" ng-click="updateQty()">Save</button>
                    <button type="button" class="pink-btn btn" ng-click="updateQty('submit')">Submit</button>
                  </div> 
              </div>
           </div>
           <!-- Step 3 end --> 
      </div>
     </div>
    </form>
    <div class="modal-footer">
    </div>
</script>

<script type="text/ng-template" id="deleteBundle.html">
   <div class="modal-header">
          <h3 class="modal-title">Remove Bundle</h3>
      </div>
      <div class="modal-body">
          Are you sure you want to remove this bundle?
      </div>
      <div class="modal-footer">
          <button class="btn btn-primary" type="button" ng-click="removeBundle()">Remove</button>
          <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
      </div>
</script>

<script type="text/ng-template" id="myModalContentProduct.html">
    <div class="modal-header">
      <div ng-show="pageloader"><img src="/images/icons/loader.gif"></div>
        <h3 class="modal-title">Add a Product</h3><a style="float:right;cursor: pointer;" ng-click="cancel()">X</a>
    </div>
    <form  name="productForm" ng-submit="productForm.$valid && addEventProduct(product)" novalidate>
    <input type="hidden" ng-model="product.id" name="id" />
    <div class="modal-body">
        
        <fieldset class="form-group">
           <div class="col-sm-4">Available Products</div>
           <div class="col-sm-8">
           <select ng-model="product.product_id" name="product_id" class="event_number_wd form-control" ng-change="showPrice()" required>
              <option ng-selected="product.product_id == productVal.id"
 ng-repeat="productVal in productList" value="{{productVal.id}}">{{productVal.product_name}}</option>
           </select>
           <p class="help-inline error-fld ng-binding" ng-show="submittedProduct && productForm.product_id.$error.required">Please select product</p>
           </div>
        </fieldset>
        <fieldset class="form-group">
           <div class="col-sm-4">Retail Price</div>
           <div class="col-sm-8"><span class="event_number_wd form-control">{{product_retail_price}}</span></div> 
        </fieldset>
        
        <fieldset class="form-group" ng-hide="min_price">
           <div class="col-sm-4">Price(USD $)</div>
           <div class="col-sm-8"><input type="text" ng-model="product.price" name="minimum_price" class="event_number_wd form-control"></div>
        </fieldset>
        
        <fieldset class="form-group">
           <div class="col-sm-4">Placement</div>
           <div class="col-sm-8">
              <section class="radio-sec custom-check">
                <section class="radio-inline">
                  <input type="checkbox" id="checkbox03" name="listing" ng-model="product.placement_listing">
                  <label for="checkbox03">Listing Page</label>
                </section>
                <section class="radio-inline">
                  <input type="checkbox" id="checkbox04"  name="confirmation" ng-model="product.placement_confirmation">
                  <label for="checkbox04"> Confirmation Page</label>
                </section>
              </section>
           </div>
        </fieldset>

        <fieldset class="form-group">
           <div class="col-sm-4">Hide in Box Office</div>
           <div class="col-sm-8">

            <section class="radio-sec">
              <section class="radio-inline">
                <div class="onoffswitch">
                  <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch5" ng-model="product.hide_in_box_office" checked>
                  <label class="onoffswitch-label" for="myonoffswitch5"></label>
                </div>
              </section>
            </section>
           </div>
        </fieldset>
        
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="submit" ng-click="submittedProduct=true">Submit</button>
        <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>
    </form>
</script>

<script type="text/ng-template" id="deleteEventProduct.html">
   <div class="modal-header">
          <h3 class="modal-title">Remove Product</h3>
      </div>
      <div class="modal-body">
          Are you sure you want to remove this product?
      </div>
      <div class="modal-footer">
          <button class="btn btn-primary" type="button" ng-click="removeEventProduct()">Remove</button>
          <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
      </div>
</script>

